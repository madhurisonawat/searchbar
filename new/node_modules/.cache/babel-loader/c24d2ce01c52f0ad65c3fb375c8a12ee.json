{"ast":null,"code":"var _jsxFileName = \"/home/rs/Desktop/masai_school_repo/ac_040_madhuri/week_25/day_5/assignments/search-bar/src/components/Searchbar.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useThrottle } from '../utils/Throttle';\nimport { Link } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nconst SearchBarWrapper = styled.div`\nposition :relative;\nborder:1px solid black;\nborder-radius:20px;\ndisplay:flex;\nflex-direction:row;\npadding:10px;\nwidth:400px;\nmargin-left:35%;\nborder-bottom-right-radius :${({\n  results\n}) => results ? `0px` : `20px`}\nborder-bottom-left-radius :${({\n  results\n}) => results ? `0px` : `20px`}\nborder-bottom-color :${({\n  results\n}) => results ? `transparent` : `black`}\n`;\nconst IconImage = styled.img`\nheight:20px;\npadding-right:20px;`;\nconst Input = styled.input`\noutline:none;\nflex:100%;\nborder:none;\nwidth:300px`;\nconst RightSide = styled.div`\ndisplay:flex;\nflex:0 0 auto;\npadding-right:10px`;\nconst Spinner = styled.div`\nborder:5px solid grey;\nborder-top: 5px solid blue;\nborder-radius :50%;\nwidth:15px;\nheight:15px;\nanimation: spin 1s linear infinite;\nmargin-left:15px;\n@keyframes spin{\n    0%{\n        transform :rotate (0deg)\n    }\n    100%{\n        transform : rotate(360deg)\n    }\n}`;\nconst Suggestions = styled.div`\ndisplay:flex;\nflex-direction:column;\nflex:0 0 auto;\nwidth:420px;\nmargin-left:35%;\nmax-height:300px;\nborder-bottom-right-radius:20px;\nborder-bottom-left-radius:20px;\n\n& *{\n    border:1px solid grey;\n    border-top-color:transparent;\n    border-bottom-color:transparent;\n    flex:1;\n    padding:5px;\n    padding-left:30px;\n    text-decoration:none;\n  \n\n}\n& :nth-child(${({\n  active\n}) => active}){\n    background:gray;\n    color:white;\n    font-weight:bolder\n}`;\nexport default function Searchbar({\n  onChange,\n  suggestions,\n  loading,\n  setLoading\n}) {\n  const [q, setQ] = useState(\"\");\n  const [active, setActive] = useState(0);\n  const throttleVal = useThrottle(q, 1000);\n  const history = useHistory();\n\n  const handelInput = e => {\n    setQ(e.target.value);\n    setLoading(true);\n  };\n\n  const clearQuery = () => {\n    setQ(\"\");\n\n    if (loading) {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    onChange(throttleVal);\n  }, [onChange, throttleVal]);\n\n  const handleSuggestions = e => {\n    switch (e.keyCode) {\n      case 40:\n        {\n          if (active >= suggestions.length) {\n            setActive(1);\n          } else {\n            setActive(prev => prev + 1);\n          }\n\n          return;\n        }\n\n      case 38:\n        {\n          if (active <= 0 || active === 1) {\n            setActive(0);\n          } else {\n            setActive(prev => prev - 1);\n          }\n\n          return;\n        }\n\n      case 13:\n        {\n          alert(e.target.value);\n        }\n\n      default:\n        {\n          setActive(0);\n          return;\n        }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SearchBarWrapper, {\n    results: suggestions.length !== 0 && !loading,\n    onKeyUp: handleSuggestions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconImage, {\n    src: \"https://image.flaticon.com/icons/svg/622/622669.svg\",\n    alt: \"icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    value: q,\n    onChange: handelInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(RightSide, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, q && /*#__PURE__*/React.createElement(\"div\", {\n    onClick: clearQuery,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }\n  }, \"X\"), loading && /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }))), !loading && /*#__PURE__*/React.createElement(Suggestions, {\n    active: active,\n    limit: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 14\n    }\n  }, suggestions.filter((items, index) => index >= active && index < active + 5).map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n    value: item,\n    key: index,\n    onMouseOver: () => setActive(index + 1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 18\n    }\n  }, item))));\n}","map":{"version":3,"sources":["/home/rs/Desktop/masai_school_repo/ac_040_madhuri/week_25/day_5/assignments/search-bar/src/components/Searchbar.jsx"],"names":["React","useState","useEffect","styled","useThrottle","Link","useHistory","SearchBarWrapper","div","results","IconImage","img","Input","input","RightSide","Spinner","Suggestions","active","Searchbar","onChange","suggestions","loading","setLoading","q","setQ","setActive","throttleVal","history","handelInput","e","target","value","clearQuery","handleSuggestions","keyCode","length","prev","alert","filter","items","index","map","item"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,SAAQC,IAAR,QAAoB,kBAApB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,MAAMC,gBAAgB,GAAGJ,MAAM,CAACK,GAAI;;;;;;;;;8BASN,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAaA,OAAO,GAAE,KAAF,GAAQ,MAAM;6BACnC,CAAC;AAACA,EAAAA;AAAD,CAAD,KAAaA,OAAO,GAAE,KAAF,GAAQ,MAAM;uBACxC,CAAC;AAACA,EAAAA;AAAD,CAAD,KAAaA,OAAO,GAAE,aAAF,GAAgB,OAAO;CAXlE;AAaA,MAAMC,SAAS,GAAGP,MAAM,CAACQ,GAAI;;oBAA7B;AAIA,MAAMC,KAAK,GAAGT,MAAM,CAACU,KAAM;;;;YAA3B;AAMA,MAAMC,SAAS,GAAGX,MAAM,CAACK,GAAI;;;mBAA7B;AAKA,MAAMO,OAAO,GAAGZ,MAAM,CAACK,GAAI;;;;;;;;;;;;;;;EAA3B;AAkBA,MAAMQ,WAAW,GAAGb,MAAM,CAACK,GAAI;;;;;;;;;;;;;;;;;;;;;eAqBhB,CAAC;AAACS,EAAAA;AAAD,CAAD,KAAYA,MAAO;;;;EArBlC;AA+BA,eAAe,SAASC,SAAT,CAAmB;AAACC,EAAAA,QAAD;AAAUC,EAAAA,WAAV;AAAsBC,EAAAA,OAAtB;AAA8BC,EAAAA;AAA9B,CAAnB,EAA8D;AACzE,QAAM,CAACC,CAAD,EAAIC,IAAJ,IAAYvB,QAAQ,CAAC,EAAD,CAA1B;AACA,QAAM,CAACgB,MAAD,EAASQ,SAAT,IAAsBxB,QAAQ,CAAC,CAAD,CAApC;AACA,QAAMyB,WAAW,GAAGtB,WAAW,CAACmB,CAAD,EAAI,IAAJ,CAA/B;AACA,QAAMI,OAAO,GAAGrB,UAAU,EAA1B;;AACA,QAAMsB,WAAW,GAAIC,CAAD,IAAO;AACvBL,IAAAA,IAAI,CAACK,CAAC,CAACC,MAAF,CAASC,KAAV,CAAJ;AACAT,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH,GAHD;;AAIA,QAAMU,UAAU,GAAG,MAAI;AACnBR,IAAAA,IAAI,CAAC,EAAD,CAAJ;;AACA,QAAGH,OAAH,EAAW;AACPC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GALD;;AAOApB,EAAAA,SAAS,CAAE,MAAI;AACXiB,IAAAA,QAAQ,CAACO,WAAD,CAAR;AAEH,GAHQ,EAGP,CAACP,QAAD,EAAUO,WAAV,CAHO,CAAT;;AAKC,QAAMO,iBAAiB,GAAGJ,CAAD,IAAM;AAC3B,YAAOA,CAAC,CAACK,OAAT;AACI,WAAK,EAAL;AAAS;AACL,cAAGjB,MAAM,IAAIG,WAAW,CAACe,MAAzB,EAAgC;AAC5BV,YAAAA,SAAS,CAAC,CAAD,CAAT;AACH,WAFD,MAGI;AACAA,YAAAA,SAAS,CAAEW,IAAD,IAAQA,IAAI,GAAC,CAAd,CAAT;AACH;;AACD;AACH;;AACD,WAAK,EAAL;AAAQ;AACJ,cAAGnB,MAAM,IAAI,CAAV,IAAeA,MAAM,KAAK,CAA7B,EAAgC;AAC5BQ,YAAAA,SAAS,CAAC,CAAD,CAAT;AACH,WAFD,MAGK;AACDA,YAAAA,SAAS,CAAEW,IAAD,IAASA,IAAI,GAAC,CAAf,CAAT;AACH;;AACD;AACH;;AACD,WAAK,EAAL;AAAS;AACLC,UAAAA,KAAK,CAACR,CAAC,CAACC,MAAF,CAASC,KAAV,CAAL;AAGH;;AACD;AAAS;AACLN,UAAAA,SAAS,CAAC,CAAD,CAAT;AACA;AACH;AA3BL;AA8BH,GA/BD;;AAiCD,sBAEI,uDACA,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAIL,WAAW,CAACe,MAAZ,KAAqB,CAArB,IAA0B,CAACd,OAAxD;AAAiE,IAAA,OAAO,EAAIY,iBAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,SAAD;AAAW,IAAA,GAAG,EAAC,qDAAf;AAAoE,IAAA,GAAG,EAAC,MAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEV,CAAd;AAAiB,IAAA,QAAQ,EAAIK,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,eAGI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKL,CAAC,iBAAI;AAAK,IAAA,OAAO,EAAGS,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADV,EAEKX,OAAO,iBAAI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFhB,CAHJ,CADA,EASC,CAACA,OAAD,iBACI,oBAAC,WAAD;AAAa,IAAA,MAAM,EAAEJ,MAArB;AAA6B,IAAA,KAAK,EAAE,CAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCG,WAAW,CAACkB,MAAZ,CAAmB,CAACC,KAAD,EAAOC,KAAP,KAAeA,KAAK,IAAGvB,MAAR,IAAkBuB,KAAK,GAACvB,MAAM,GAAC,CAAjE,EAAoEwB,GAApE,CAAwE,CAACC,IAAD,EAAMF,KAAN,kBACrE;AAAK,IAAA,KAAK,EAAEE,IAAZ;AAAkB,IAAA,GAAG,EAAGF,KAAxB;AAA+B,IAAA,WAAW,EAAG,MAAIf,SAAS,CAACe,KAAK,GAAC,CAAP,CAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsEE,IAAtE,CADH,CADD,CAVL,CAFJ;AAsBH","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { useThrottle } from '../utils/Throttle'\nimport {Link } from 'react-router-dom'\nimport { useHistory } from \"react-router-dom\";\n\nconst SearchBarWrapper = styled.div`\nposition :relative;\nborder:1px solid black;\nborder-radius:20px;\ndisplay:flex;\nflex-direction:row;\npadding:10px;\nwidth:400px;\nmargin-left:35%;\nborder-bottom-right-radius :${({results})=>results?`0px`:`20px`}\nborder-bottom-left-radius :${({results})=>results?`0px`:`20px`}\nborder-bottom-color :${({results})=>results?`transparent`:`black`}\n`\nconst IconImage = styled.img`\nheight:20px;\npadding-right:20px;`\n\nconst Input = styled.input`\noutline:none;\nflex:100%;\nborder:none;\nwidth:300px`\n\nconst RightSide = styled.div`\ndisplay:flex;\nflex:0 0 auto;\npadding-right:10px`\n\nconst Spinner = styled.div`\nborder:5px solid grey;\nborder-top: 5px solid blue;\nborder-radius :50%;\nwidth:15px;\nheight:15px;\nanimation: spin 1s linear infinite;\nmargin-left:15px;\n@keyframes spin{\n    0%{\n        transform :rotate (0deg)\n    }\n    100%{\n        transform : rotate(360deg)\n    }\n}`\n\n\nconst Suggestions = styled.div`\ndisplay:flex;\nflex-direction:column;\nflex:0 0 auto;\nwidth:420px;\nmargin-left:35%;\nmax-height:300px;\nborder-bottom-right-radius:20px;\nborder-bottom-left-radius:20px;\n\n& *{\n    border:1px solid grey;\n    border-top-color:transparent;\n    border-bottom-color:transparent;\n    flex:1;\n    padding:5px;\n    padding-left:30px;\n    text-decoration:none;\n  \n\n}\n& :nth-child(${({active})=>active}){\n    background:gray;\n    color:white;\n    font-weight:bolder\n}`\n\n\n\n\n\nexport default function Searchbar({onChange,suggestions,loading,setLoading}) {\n    const [q, setQ] = useState(\"\")\n    const [active, setActive] = useState(0)\n    const throttleVal = useThrottle(q, 1000)\n    const history = useHistory()\n    const handelInput = (e) => {\n        setQ(e.target.value)\n        setLoading(true)\n    }\n    const clearQuery = ()=>{\n        setQ(\"\")\n        if(loading){\n            setLoading(false)\n        }\n    }\n\n    useEffect (()=>{\n        onChange(throttleVal)\n\n    },[onChange,throttleVal])\n    \n     const handleSuggestions =(e) =>{\n         switch(e.keyCode){\n             case 40 :{\n                 if(active >= suggestions.length){\n                     setActive(1)\n                 }\n                 else{\n                     setActive((prev)=>prev+1)\n                 }\n                 return\n             }\n             case 38:{\n                 if(active <= 0 || active === 1 ){\n                     setActive(0)\n                 }\n                 else {\n                     setActive((prev) =>prev-1)\n                 }\n                 return\n             }\n             case 13 :{\n                 alert(e.target.value)\n     \n\n             }\n             default :{\n                 setActive(0)\n                 return\n             }\n\n         }\n     }\n\n    return (\n\n        <>\n        <SearchBarWrapper results = {suggestions.length!==0 && !loading} onKeyUp = {handleSuggestions}>\n            <IconImage src=\"https://image.flaticon.com/icons/svg/622/622669.svg\"alt=\"icon\"/>\n            <Input value={q} onChange = {handelInput}/>\n            <RightSide>\n                {q && <div onClick ={clearQuery}>X</div>}\n                {loading && <Spinner/>}\n            </RightSide>\n        </SearchBarWrapper>\n        {!loading  && (\n             <Suggestions active={active} limit={5}>\n             {suggestions.filter((items,index)=>index >=active && index<active+5).map((item,index)=>(\n                 <div value={item} key ={index} onMouseOver ={()=>setActive(index+1)}>{item}</div>\n             \n             ))}\n         </Suggestions>\n        )}\n\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}